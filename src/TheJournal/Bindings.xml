<Bindings>
    <Binding name="TOGGLEJOURNAL" header="THEJOURNAL">
        if DungeonJournalFrame and DungeonJournalFrame:IsShown() then
            DungeonJournalFrame:Hide()
        elseif DungeonJournalFrame then
            DungeonJournalFrame:Show()
            
            -- ʕ •ᴥ•ʔ✿ Refresh bag scanner when opening journal ✿ʕ •ᴥ•ʔ
            if _G.TheJournal_UIBagScanner and _G.TheJournal_UIBagScanner.RefreshBagScan then
                _G.TheJournal_UIBagScanner.RefreshBagScan()
            end
            
            -- ʕ •ᴥ•ʔ✿ Invalidate attunement cache when opening journal ✿ʕ •ᴥ•ʔ
            if _G.TheJournal_UIBagScanner and _G.TheJournal_UIBagScanner.InvalidateAttunementCache then
                _G.TheJournal_UIBagScanner.InvalidateAttunementCache()
            end
            
            if _G.RefreshAllAttunableText then
                _G.RefreshAllAttunableText()
            end
            if _G.SortDungeonsByAttunement then
                _G.SortDungeonsByAttunement()
            end
        elseif _G.ToggleJournal then
            _G.ToggleJournal()
        end
    </Binding>
</Bindings> 